%Anthony Frazier

A = [1 -8 -7 5;0 0 -3 2; 1 -8 -10 7]

A =

     1    -8    -7     5
     0     0    -3     2
     1    -8   -10     7

b=[4;-3;1]

b =

     4
    -3
     1

csolve2(A,b)
The rank of the coefficient matrix is 2. 
Pivot variables:	 1	 3
Free variables:	 2	 4
{Index exceeds matrix dimensions.

Error in <a href="matlab:matlab.internal.language.introspective.errorDocCallback('csolve2', 'C:\Users\anthonyf\Documents\MATLAB\csolve2.m', 25)" style="font-weight:bold">csolve2</a> (<a href="matlab: opentoline('C:\Users\anthonyf\Documents\MATLAB\csolve2.m',25,0)">line 25</a>)
    pA = A(pivot(i),:); % pA consists of the pivot columns from A
} 
diary off




function csolve2(A,b)

[m,n] = size(A);
pivot = []; % initialize "pivot"
free = 1:1:n; % initialize "free"
% Store the particular solution in xp
xp = 1:1:n; % zero column vector with appropriate dimension
csolve(A);

R = rref(A);
for i = 1:m % visit every row
    for j = 1:n % visit every column
        if R(i,j) == 1 % check for a leading 1
            pivot = [pivot,j]; % save the pivot column
            break; % terminate the for loop
        end
    end
end
% Now "pivot" stores the indexes of all the pivot variables.
% The indexes not in "pivot" are the free variables. 
% Remove the elements in "pivot" from "free".
free([pivot]) = '';

for i = 1:n
    pA = A(pivot(i),:); % pA consists of the pivot columns from A
end
tempa = (pA) \ (b); % This solves the equation pA*tempa = b.
%record tempa in the appropriate indexes of xp
for i = 1:n
    j = pivot(i);
    xp(i) = tempa(i);
end
fprintf('The particular solution is: \n %d. \n', length(xp));
% Store the special solutions in a matrix xs, with appropriate
% dimensions. The ith column of xs will store the solution to Ax=0,
% where the ith free variable is set equal to 1, and the others
% are set equal to 0.
% We already have pivot and free from above.
%%xs = 1:1:n; % zero matrix with appropriate dimensions
% We already have pA from above.
%%visit every free variable
% set the ith free variable equal to 1 in the ith special solution
% and solve the resulting equation
%%tempb = -(the ith free column of A); % This is the right hand side
% when the ith free variable
% is 1.
%%xs(...) = pA\tempb;
% actual MATLAB code. This solves the equation
% pA*xs(...) = b. Store the solution in
% the appropriate indexes in xs.
%%xs(...) = 1; % set the ith free variable equal to one. The other
% free variables are already 0 due to the
% initialization.
end

